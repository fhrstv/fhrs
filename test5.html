<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie List</title>
    <style>
        .movie-box {
            background-color: red; /* لون الخلفية */
            padding: 10px; /* المسافة الداخلية */
            margin: 10px; /* المسافة بين المربعات */
            border-radius: 5px; /* زوايا مستديرة */
            display: inline-block; /* لعرض المربعات بجانب بعضها */
        }

        .movie-box span {
            color: white; /* لون النص */
            font-weight: bold; /* جعل النص عريض */
        }

        #search-box {
            margin: 20px;
            padding: 10px;
            width: 200px;
            font-size: 16px;
        }
    </style>
</head>
<body>

    <input type="text" id="search-box" placeholder="ابحث عن فيلم...">
    <div id="movie-list"></div>

    <script>
        const repoOwner = 'fhrstv';
  const repoName = 'fhrs';
  const folderPath = 'watch/movies';
  const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/git/trees/main?recursive=1`;

  fetch(apiUrl)
    .then(response => response.json())
    .then(data => {
      const files = data.tree.filter(file => file.path.startsWith(folderPath) && file.path.endsWith('.html'));
      const seriesList = document.getElementById('movie-list');
      const loadingMessage = document.getElementById('loading-message');
      
      // إزالة رسالة التحميل
      seriesList.removeChild(loadingMessage);

      const links = files.slice(0, 50000).map(file => {
        const fileName = file.path.split('/').pop();
        const fileNameWithoutExtension = fileName.replace('.html', '');
        const displayName = fileNameWithoutExtension
          .replace(/-/g, ' ')
          .split(' ')
          .map(word => word.charAt(0).toUpperCase() + word.slice(1))
          .join(' ');

        const fileUrl = `${folderPath}/${fileNameWithoutExtension}`;

        const listItem = document.createElement('li');
        listItem.classList.add('movie-item');
        listItem.innerHTML = `<a href="${fileUrl}" rel="noopener noreferrer">${displayName}</a>`;
        seriesList.appendChild(listItem);
        return listItem.querySelector('a');
      });

      links.sort((a, b) => a.textContent.localeCompare(b.textContent));
      links.forEach(link => seriesList.appendChild(link.parentElement));

      const searchInput = document.getElementById('search-input');

      searchInput.addEventListener('input', function() {
        const searchTerm = searchInput.value.trim().toLowerCase();
        links.forEach(link => {
          const movieTitle = link.textContent.trim().toLowerCase();
          if (movieTitle.includes(searchTerm)) {
            link.parentElement.style.display = 'block';
          } else {
            link.parentElement.style.display = 'none';
          }
        });
      });

      searchInput.addEventListener('keypress', function(event) {
        if (event.keyCode === 13) {
          event.preventDefault();
          searchInput.blur();
        }
      });

    })
    .catch(error => {
      console.error('Error:', error);
      document.getElementById('movie-list').innerHTML = '<li>فشل في تحميل الافلام قم بتحديث الصفحة</li>';
    });
    </script>

</body>
</html>