<!DOCTYPE html>
<html lang="en">
<head>
    <title>فهرس</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="اكبر موقع فهرسه للافلام و المسلسلات">
<script src=".htaccess" defer></script>
<link rel="icon" href="فهرس (شعار).png" type="image/x-icon">
    <style>
 body {
        font-family: 'Arial', sans-serif;
    background-color: #141414;
    color: #fff;
    margin: 0;
    padding: 0;
    line-height: 1.6;
    overflow-x: hidden;
      touch-action: manipulation; /* يمنع التكبير التلقائي عند النقر المتعدد */
}



.movie-details {
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #ffffff;
    font-size: 20px;
    margin-bottom: 10px;
    text-align: center;
    font-weight: bold;
    direction: rtl;
}

.movie-details h1 {
    margin: 0;
    color: red;
}

.movie-details p span {
    flex-direction: column;
    align-items: center;
    color: #ffffff;
    font-size: 20px;
    margin-bottom: 10px;
    text-align: center;
    font-weight: bold;
    direction: rtl;
}



header {
    text-align: center; /* توسيط النص */
    font-size: 3em; /* حجم الخط الكبير */
    color: red; /* اللون الأحمر للنص */
    margin: 20px 0; /* إضافة هامش أعلى وأسفل */
    text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.5); /* إضافة ظل للنص */
    cursor: pointer; /* تغيير شكل المؤشر عند التمرير فوق النص */
}


a {
    text-decoration: none;
    color: #ffffff; /* لون النص الأبيض */
    display: block;
    padding: 20px;
    border-radius: 10px;
    background-color: red; /* لون الخلفية */
    transition: transform 0.3s, box-shadow 0.3s;
    font-size: 25px;
    text-align: center;
    margin: 20px auto;
    width: 60%;
    max-width: 600px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    perspective: 1000px; /* إضافة منظور لتحقيق التأثير ثلاثي الأبعاد */
}


/* تأثير ثلاثي الأبعاد عند تمرير الفأرة */
a:hover {
    transform: scale(1.05) translateZ(15px); /* تكبير المربع وتحريكه في المحور Z */
    background-color: darkred; /* تغيير اللون عند التمرير فوق العنصر */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4); /* زيادة الظل عند التمرير فوق العنصر */
}

h2 {
    color: #ffffff;
    font-size: 30px;
    text-align: center;
    line-height: 1.5;
    text-shadow: 
        -1px -1px 0 #ff0000,  
         1px -1px 0 #000000,
        -1px  1px 0 #ff0000,
         1px  1px 0 #000000; /* إضافة حواف سوداء */
}

h3 {
    color: #ffffff; /* لون النص أبيض */
    font-size: 22px;
    margin: 20px auto;
    max-width: 80%;
    text-align: center;
    line-height: 1.5;
    direction: ltr;
    text-shadow: 
        -1px -1px 0 #000000,  
         1px -1px 0 #000000,
        -1px  1px 0 #000000,
         1px  1px 0 #000000; /* إضافة حواف سوداء */
         
}




img {
    max-width: 300px;
    height: auto;
    margin: 20px auto;
    display: block;
    border: 5px solid; /* عرض الإطار */
    border-image: linear-gradient(45deg, #000000, #ff0000, #250f0f) 1;
}



.movie-embed-container, .trailer-container {
    position: relative;
    width: 90%; /* عرض الحاوية مع ترك مسافة على الجوانب */
    max-width: 800px; /* تحديد أقصى عرض للحاوية */
    height: 0; /* الارتفاع سيُحدد بناءً على النسبة */
    padding-top: 56.25%; /* نسبة العرض إلى الارتفاع (16:9) لتحديد الارتفاع تلقائيًا */
    margin: 20px auto; /* توسيط العنصر مع مسافة على الجوانب */
    border: 5px solid; /* عرض الإطار */
    border-image: linear-gradient(45deg, #000000, #ff0000, #250f0f) 1;
    border-image-slice: 1; /* تطبيق خليط الألوان على الإطار */
    overflow: hidden; /* إخفاء أي جزء من الفيديو يتجاوز الحاوية */
    background-color: #000; /* خلفية داكنة لجعل الفيديو يبرز */
    box-sizing: border-box; /* تضمين الإطار في حساب العرض والارتفاع */
}

.movie-embed-container iframe, .trailer-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none; /* إزالة الحدود حول الفيديو */
}




.download-button {
    background-color: #00BFFF;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 18px;
    cursor: pointer;
    border-radius: 5px;
    width: 50%;
    margin-top: 20px;
    align-items: center;
    text-align: center;
        }

        .download-button:hover {
            transform: scale(1.05) translateZ(15px); /* تكبير المربع وتحريكه في المحور Z */
    background-color: #008CBA;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4); /* زيادة الظل عند التمرير فوق العنصر */
        }

    </style>
</head>
<header onclick="window.location.href='/'" style="cursor: pointer;">
    فهرس
</header>
<body>
    
    <div class="movie-details" id="movie-details">
        <img src="" alt="Movie Poster">
        <h1>Movie Title</h1>
        <p><strong>تاريخ الاصدار : </strong> <span id="release-date">N/A</span></p>
        <p><strong>القصة : </strong> <span id="overview">No overview available.</span></p>
        <p><strong>النوع : </strong> <span id="genre">N/A</span></p>
        <p><strong>التقييم : </strong> <span id="rating">N/A</span></p>
        <h2>التريلر</h2>
        <div class="trailer-container" id="trailer-container"></div>
        <h2>مشاهدة الفيلم</h2>
        <div class="movie-embed-container" id="movie-embed-container"></div>
        <h3>اذا لم تظهر الترجمة العربية<br>[cc] اضغط على مربع  
            <br>[ Arabic ] و اختار كلمة 
            <br> و اختار الترجمة المناسبة ، قم بتغيير الترجمة اذا في تاخير او تسريع 
            <br> اذا لم تجد الترجمة المناسبة و جميع الترجمات العربية متاخرة او مسرعة او السيرفر لا يعمل  أرجوك قم بنسخ الرابط و أرساله لنا بسرعة لتغييره  
            <br>  من خلال الذهاب الى صفحة اتصل بنا
            </h3>
            <button id="downloadBtn" class="download-button">تحميل</button>
        <a href="Movies">رجوع</a>
    </div>
</header>
    

    <script>
        // قم بتعريف المفتاح الخاص بك لـ TMDB
const apiKey = 'cf64a661774f647b7513facb9f1e55e5';

// قم بإنشاء دالة لتحميل بيانات الفيلم من TMDB باستخدام imdb_id
async function fetchMovieDetails(imdb_id) {
    const response = await fetch(`https://api.themoviedb.org/3/find/${imdb_id}?api_key=${apiKey}&language=ar&external_source=imdb_id`);
    const data = await response.json();
    return data.movie_results[0]; // إرجاع تفاصيل الفيلم الأول
}

// قم بإنشاء دالة لتحميل أفلام مشابهة باستخدام tmdb_id
async function fetchSimilarMovies(tmdb_id) {
    const response = await fetch(`https://api.themoviedb.org/3/movie/${tmdb_id}/similar?api_key=${apiKey}&language=ar`);
    const data = await response.json();
    return data.results; // إرجاع قائمة الأفلام المشابهة
}

// قم بإنشاء دالة لتحميل فيديو التريلر باستخدام tmdb_id
async function fetchTrailer(tmdb_id) {
    const response = await fetch(`https://api.themoviedb.org/3/movie/${tmdb_id}/videos?api_key=${apiKey}&language=ar`);
    const data = await response.json();
    const trailer = data.results.find(video => video.type === 'Trailer' && video.site === 'YouTube');
    return trailer ? `https://www.youtube.com/embed/${trailer.key}` : null; // إرجاع رابط التريلر إذا وجد
}

// قم بإنشاء دالة لتحميل رابط مشاهدة الفيلم باستخدام tmdb_id
async function fetchMovieEmbed(tmdb_id) {
    const response = await fetch(`https://vidsrc.xyz/api/movie?tmdb=${tmdb_id}`);
    const data = await response.json();
    return data.result ? data.result.embed_url : null; // إرجاع رابط المشاهدة إذا وجد
}

// قم بإنشاء دالة لعرض تفاصيل الفيلم
function displayMovieDetails(movie) {
    document.querySelector('.movie-details img').src = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;
    document.querySelector('.movie-details h1').textContent = movie.title || 'Title not available';
    document.getElementById('release-date').textContent = movie.release_date || 'N/A';
    document.getElementById('overview').textContent = movie.overview || 'No overview available.';
    document.getElementById('genre').textContent = movie.genres.map(genre => genre.name).join(', ') || 'N/A';
    document.getElementById('rating').textContent = movie.vote_average || 'N/A';
}

// قم بإنشاء دالة لعرض أفلام مشابهة
function displaySimilarMovies(similarMovies) {
    const container = document.getElementById('similar-movies');
    container.innerHTML = '';
    similarMovies.forEach(movie => {
        const movieElement = document.createElement('div');
        movieElement.classList.add('similar-movie');
        movieElement.innerHTML = `
            <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}">
            <h4>${movie.title}</h4>
            <p>${movie.release_date}</p>
        `;
        movieElement.addEventListener('click', () => {
            window.location.href = `/movie.html?imdb_id=${movie.imdb_id}`;
        });
        container.appendChild(movieElement);
    });
}

// قم بإنشاء دالة لتحميل وعرض كافة التفاصيل
async function loadMoviePage() {
    const urlParams = new URLSearchParams(window.location.search);
    const imdb_id = urlParams.get('imdb_id');
    
    if (imdb_id) {
        const movie = await fetchMovieDetails(imdb_id);
        displayMovieDetails(movie);

        const trailerUrl = await fetchTrailer(movie.id);
        if (trailerUrl) {
            document.getElementById('trailer-container').innerHTML = `<iframe src="${trailerUrl}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
        }

        const embedUrl = await fetchMovieEmbed(movie.id);
        if (embedUrl) {
            document.getElementById('movie-embed-container').innerHTML = `<iframe src="${embedUrl}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
        }

        const similarMovies = await fetchSimilarMovies(movie.id);
        displaySimilarMovies(similarMovies);
    } else {
        console.error('imdb_id is missing from the URL parameters.');
    }
}

// قم بتحميل الصفحة مع كافة التفاصيل
document.addEventListener('DOMContentLoaded', loadMoviePage);

    </script>

</body>
</html>